<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<body>

<h1>This is a Heading</h1>
<p>This is a paragraph.</p>
<p id="answer"> None </p>
<button onclick="App.capture_webbox()">Capture</button>
<input id="text"></input>
<button onclick="save()">Save</button>
<input id="text2"></input>
<button onclick="save2()">Save Other</button>
<div>
    <br/>
    <label for="img">Select image:</label>
    <input id='file' type="file" name='file_upload'>
    <br/>
    <br/>
    
    <input id="questionName" placeholder="nhập câu hỏi cần lưu"></input>
    <button onclick="save_file()">Save file</button>
</div>

<script>
    //on_init(answer_data) 
    function on_init(answer_data){
   	 document.getElementById('answer').innerText = answer_data;
   }

   window.addEventListener('message', function(e) {
       if(e.data.function === 'on_init'){
            on_init(e.data.data)
        }
    });

    //App.save_answer(data)
    function save(){
        var value = document.getElementById('text').value;
        try {
            App.save_answer(value)            
        } catch (error) {
            window.parent.postMessage({
                function: 'save_answer',
                data : value
            }, '*');
        }
    }
	 
    //App.save_answer_other(data)
	function save2(){
        var value = document.getElementById('text2').value;
        try {
            App.save_answer_other('result', value);
        } catch (error) {
            window.parent.postMessage({
                function : 'save_answer_other',
                data : value, 
                type : 'text',
                questionName: 'result'
            }, '*');
        }   
   }
   
   function save_file(){
        var value = document.getElementById('file').files[0];
        var questionName = document.getElementById('questionName').value;
        try {
            App.save_answer_other('result', value);
        } catch (error) {
            window.parent.postMessage({
                function : 'save_answer_other',
                data : value,
                type: 'file', 
                questionName: questionName
            }, '*');
        }   
   }
</script>
</body>
</html>